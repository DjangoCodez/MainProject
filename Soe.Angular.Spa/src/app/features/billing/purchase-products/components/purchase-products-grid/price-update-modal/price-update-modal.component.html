<soe-dialog>
  <ng-container dialog-content>
    @if (form) {
      <form
        [formGroup]="form"
        class="soe-edit-form"
        novalidate
        autocomplete="off">
        <div>
          <soe-expansion-panel
            [labelKey]="'billing.purchase.product.newprice'"
            [static]="true">
            <div class="row">
              <div class="col-sm-12">
                <soe-instruction
                  text="billing.purchase.product.updateexistinginfo"></soe-instruction>
              </div>
            </div>
            <div class="row">
              <div class="col-sm-4">
                <soe-checkbox
                  [labelKey]="'billing.purchase.product.updateexisting'"
                  formControlName="updateExisting"></soe-checkbox>
              </div>
              <div class="col-sm-4">
                <soe-datepicker
                  [labelKey]="'billing.purchase.product.priceisfrom'"
                  formControlName="dateFrom"></soe-datepicker>
              </div>
              <div class="col-sm-4">
                <soe-datepicker
                  [labelKey]="'billing.purchase.product.priceisto'"
                  formControlName="dateTo"></soe-datepicker>
              </div>
            </div>
            <div class="row" formGroupName="priceUpdate">
              <div class="col-sm-4">
                <soe-numberbox
                  [labelKey]="'common.amount'"
                  formControlName="amount"
                  [decimals]="2"></soe-numberbox>
              </div>
              <div class="col-sm-4">
                <soe-numberbox
                  [labelKey]="'common.percentage'"
                  formControlName="percentage"
                  [decimals]="2"></soe-numberbox>
              </div>
              <div class="col-sm-4">
                <soe-select
                  [labelKey]="'common.rounding'"
                  [selectedId]="form.value.rounding"
                  [items]="performRoundingOptions.data || []"
                  formControlName="rounding"></soe-select>
              </div>
            </div>
          </soe-expansion-panel>
          <soe-expansion-panel
            [labelKey]="'billing.purchase.product.priceselection'"
            [static]="true">
            <div class="row">
              <div class="col-sm-14">
                <soe-instruction
                  text="billing.purchase.product.comparisondateinfo"></soe-instruction>
              </div>
            </div>
            <div class="row">
              <div class="col-sm-6">
                <soe-datepicker
                  [labelKey]="'billing.purchase.product.comparisondate'"
                  formControlName="priceComparisonDate"></soe-datepicker>
              </div>
              <div class="col-sm-6">
                <soe-select
                  [labelKey]="'common.currency'"
                  [selectedId]="form.value.currencyId"
                  [items]="performCurrencies.data || []"
                  formControlName="currencyId"></soe-select>
              </div>
            </div>
            <div class="row">
              <div class="col-sm-6">
                <soe-numberbox
                  [labelKey]="'billing.purchase.product.quantityfrom'"
                  [decimals]="2"
                  formControlName="quantityFrom"></soe-numberbox>
              </div>
              <div class="col-sm-6">
                <soe-numberbox
                  [labelKey]="'billing.purchase.product.quantityto'"
                  [decimals]="2"
                  formControlName="quantityTo"></soe-numberbox>
              </div>
            </div>
          </soe-expansion-panel>
          <div class="row">
            <soe-instruction
              [text]="selectedSupplierProductsText"></soe-instruction>
          </div>
          <div class="soe-form-footer">
            <div class="col-sm-12">
              <div class="float-end">
                <soe-save-button
                  (action)="triggerPriceUpdate()"
                  (validationErrorsAction)="openFormValidationErrors()"
                  [invalid]="form.invalid"
                  [dirty]="form.dirty"></soe-save-button>
              </div>
            </div>
          </div>
        </div>
      </form>
    }
  </ng-container>
</soe-dialog>
