<div
  [class.mt-2]="!inline()"
  [ngStyle]="width() && !inline() ? { 'width.px': width() } : {}"
  [class.d-flex]="inline()"
  [class.flex-nowrap]="inline()"
  [class.form-label-inline-top-alignment]="alignInline()">
  @if (hasLabel()) {
    <div
      class="form-label-container d-flex align-items-center"
      [class.me-2]="inline()">
      <soe-label
        [labelKey]="labelKey()"
        [secondaryLabelKey]="secondaryLabelKey()"
        [secondaryLabelBold]="secondaryLabelBold()"
        [secondaryLabelParantheses]="secondaryLabelParantheses()"
        [secondaryLabelPostfixKey]="secondaryLabelPostfixKey()"
        [secondaryLabelPrefixKey]="secondaryLabelPrefixKey()"
        [isRequired]="isRequired()"></soe-label>
    </div>
  }
  @if (isReadOnly()) {
    <soe-label [labelValue]="localControl.value || ' '" [applyMinHeight]="true">
    </soe-label>
  } @else {
    <div class="d-flex input-group">
      <div class="d-flex position-relative w-100">
        <input
          matInput
          #inp="matAutocompleteTrigger"
          [name]="inputId()"
          [id]="inputId()"
          type="text"
          #inputfield
          class="form-control"
          [placeholder]="placeholderKey() | translate"
          [class.no-border-right-radius]="hasContent()"
          [autofocus]="autoFocus()"
          [formControl]="localControl"
          [matAutocomplete]="auto"
          (focus)="setFocus($event)"
          (blur)="looseFocus($event)" />
        <mat-autocomplete #auto="matAutocomplete" [panelWidth]="'auto'">
          <div class="autocomplete-list-panel">
            <div class="autocomplete-list-group">
              <div class="autocomplete-list-info">
                <span style="float: left">{{
                  'core.typetofilter' | translate
                }}</span>
                <span style="float: right"
                  >{{ filteredRecords().length }} ({{
                    records.length
                  }})</span
                >
              </div>
              @for (filteredItem of filteredRecords(); track $index) {
                <mat-option
                  [value]="filteredItem"
                  (click)="onSelect($event, filteredItem)">
                  {{ filteredItem.name }}
                </mat-option>
              }
            </div>
          </div>
        </mat-autocomplete>
        <div
          #content
          class="d-flex align-center soe-button-group flex-shrink-0">
          <ng-content></ng-content>
        </div>
      </div>
    </div>
  }
</div>
