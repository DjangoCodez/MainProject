<form name="ctrl.edit" class="ngSoeForm" novalidate autocomplete="off" data-form-state="ctrl.dirtyHandler.isDirty" confirm-on-exit>
    <soe-progressbar is-busy="ctrl.progressBusy" message="ctrl.progressMessage"></soe-progressbar>
    <div payroll-review-validation ng-model="ctrl.payrollReviewHead" rows="ctrl.payrollReviewHead.rows" data-ng-if="!ctrl.progressBusy">
        <soe-toolbar buttons="ctrl.toolbar.buttonGroups" navigator-records="ctrl.toolbar.navigatorRecords" navigator-selected-record="ctrl.toolbar.selectedRecord" navigator-show-position="true" navigator-show-dropdown="true" navigator-on-selection-changed="ctrl.toolbar.selectedRecordChanged(record);">
        </soe-toolbar>
        <soe-panel label-value="ctrl.panelLabel">
            <div class="row">
                <div class="col-sm-5">
                    <div class="info">
                        <div class="row">
                            <div class="col-sm-12">
                                <soe-label label-key="time.employee.payrollreview.instructionrow1" medium-font="true" discreet="true"></soe-label>
                                <soe-label label-key="time.employee.payrollreview.instructionrow2" medium-font="true" discreet="true" class="margin-small-top"></soe-label>
                                <soe-label label-key="time.employee.payrollreview.instructionrow3" medium-font="true" discreet="true" class="margin-small-top"></soe-label>
                                <soe-label label-key="time.employee.payrollreview.instructionrow4" medium-font="true" discreet="true" class="margin-small-top"></soe-label>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-sm-7">
                    <div class="row">
                        <div class="col-sm-6">
                            <soe-textbox label-key="common.name" model="ctrl.payrollReviewHead.name" required="true" maxlength="100" auto-focus="true"></soe-textbox>
                        </div>
                        <div class="col-sm-3">
                            <soe-datepicker label-key="time.employee.payrollreview.validfrom" model="ctrl.payrollReviewHead.dateFrom" is-readonly="ctrl.payrollReviewHeadId > 0" required="true"></soe-datepicker>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-3">
                            <soe-multiselect label-key="time.employee.payrollgroup.payrollgroups" model="ctrl.selectedPayrollGroups" options="ctrl.payrollGroups" display-prop="name" required="true" show-selected-items="true" is-disabled="!ctrl.isNew" on-selection-complete="ctrl.payrollGroupsChanged();"></soe-multiselect>
                        </div>
                        <div class="col-sm-3">
                            <soe-multiselect label-key="time.payroll.payrollpricetype.payrollpricetypes" model="ctrl.selectedPayrollPriceTypes" options="ctrl.payrollPriceTypes" display-prop="priceTypeName" required="true" show-selected-items="true" is-disabled="ctrl.payrollPriceTypes.length === 0 || !ctrl.isNew" on-selection-complete="ctrl.payrollPriceTypesChanged();"></soe-multiselect>
                        </div>
                        <div class="col-sm-3" data-ng-if="ctrl.usePayrollLevels">
                            <soe-multiselect label-key="time.employee.payrolllevel.payrolllevels" model="ctrl.selectedPayrollLevels" options="ctrl.payrollLevels" display-prop="name" show-selected-items="true" is-disabled="ctrl.payrollPriceTypes.length === 0 || !ctrl.isNew" on-selection-complete="ctrl.payrollLevelsChanged();"></soe-multiselect>
                        </div>
                        <div class="col-sm-3" style="margin-top: 22px;">
                            <button type="button" class="btn btn-sm btn-primary" data-l10n-bind="'time.employee.payrollreview.loademployees'" data-ng-disabled="!ctrl.payrollReviewHead.dateFrom || ctrl.selectedPyrollGroups.length === 0 || ctrl.selectedPayrollPriceTypes.length === 0" data-ng-click="ctrl.initLoadEmployees()"></button>
                        </div>
                    </div>
                </div>
            </div>
        </soe-panel>
        <uib-accordion close-others="false">
            <soe-accordion label-key="common.employees" is-open="true">
                <soe-toolbar buttons="ctrl.gridToolbar.buttonGroups"></soe-toolbar>
                <div id="rows-grid" ag-grid="ctrl.gridHandler.gridAg.options.gridOptions" class="ag-theme-balham" style="height: 100%; width: 100%;"></div>
                <div id="totals-grid" class="ag-theme-balham" style="height: 25px; width: 100%;" prevent-enter></div>
            </soe-accordion>
        </uib-accordion>
        <div class="ngSoeFormFooter">
            <div class="col-sm-6">
                <created-modified model="ctrl.payrollReviewHead"></created-modified>
            </div>
            <div class="col-sm-6">
                <div class="pull-right">
                    <soe-checkbox class="col" label-key="time.employee.payrollreview.keepfuture" model="ctrl.keepFuture" use-ignore-dirty="true" data-ng-if="ctrl.updateEnabled"></soe-checkbox>
                    <div class="col" data-ng-include src="ctrl.deleteButtonTemplateUrl" />
                    <div class="col" data-ng-include src="ctrl.saveButtonTemplateUrl" />
                    <button type="button" class="col btn btn-sm ngSoeMainButton" data-l10n-bind="'time.employee.payrollreview.update'" data-l10n-bind-title="'time.employee.payrollreview.update'" data-ng-click="$event.stopPropagation();ctrl.initUpdate();" data-ng-disabled="!ctrl.updateEnabled"></button>
                </div>
            </div>
        </div>
    </div>
</form>